Options -Indexes +FollowSymLinks

AddDefaultCharset utf-8

php_value error_reporting E_NONE


#	Этот параметр устанавливает максимальное время в секундах, позволяющее скрипту запускаться прежде, чем он завершается синтаксическим анализатором.
#	php_value max_execution_time 600

#	Максимальное время загрузки данных для скрипта, в том числе и файлов из формы
#	php_value max_input_time 600

#	Устанавливает максимальный размер файла, который может быть получен методом POST
#	Рекомендация: в любом случае он должен быть меньше post_max_size.
#	php_value upload_max_filesize 16M

#	Ограничивает максимальный объем данных, получаемых от пользователя методом POST
#	php_value post_max_size 20M


<FilesMatch "\.(class|functions|inc|modules|templates|cache|lib|session)$">
    Order allow,deny
</FilesMatch>

<IfModule mod_expires.c>
	ExpiresActive On
	ExpiresDefault "access plus 60 minutes"
	ExpiresByType text/html "now"
</IfModule>

<IfModule mod_rewrite.c>
	RewriteEngine on
	RewriteBase /
#	RewriteCond %{REQUEST_URI} !^/robots\.txt$ [NC]

#	http://site
	RewriteCond %{HTTP_HOST} ^www\.(.+) [NC]
	RewriteRule (.*) http://%1/$1 [R=permanent,L]

#	http://www.site
#	RewriteCond %{HTTP_HOST} !^www\. [NC]
#	RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [QSA,L]

	RewriteCond %{REQUEST_URI} !^/(class|functions|inc|modules|templates|templates_c|cache)/

	RewriteRule ^(shop|forums|guestbook|roadmap)-([0-9]+).html$ index.php?module=$1&page=$2 [QSA,L]
	RewriteRule ^(shop|forums|guestbook|roadmap)-print.html$ index.php?module=$1&print=1 [QSA,L]
	RewriteRule ^(shop|forums|guestbook|roadmap).html$ index.php?module=$1 [QSA,L]

	## Shop
	RewriteRule ^product-([0-9]+)-([0-9]+)-([0-9]+).html$ index.php?module=shop&action=product_detail&product_id=$1&categ=$2&navop=$3 [QSA,L]
	RewriteRule ^product-([0-9]+)-([0-9]+)-([0-9]+)-print.html$ index.php?module=shop&action=product_detail&product_id=$1&categ=$2&navop=$3&print=1 [QSA,L]
	RewriteRule ^category-([0-9]+)-([0-9]+)-([0-9]+)-([0-9]+).html$ index.php?module=shop&categ=$1&parent=$2&navop=$3&page=$4 [QSA,L]
	RewriteRule ^category-([0-9]+)-([0-9]+)-([0-9]+)-([0-9]+)-print.html$ index.php?module=shop&categ=$1&parent=$2&navop=$3&page=$4&print=1 [QSA,L]
	RewriteRule ^category-([0-9]+)-([0-9]+)-([0-9]+).html$ index.php?module=shop&categ=$1&parent=$2&navop=$3 [QSA,L]
	RewriteRule ^category-([0-9]+)-([0-9]+)-([0-9]+)-print.html$ index.php?module=shop&categ=$1&parent=$2&navop=$3&print=1 [QSA,L]
	RewriteRule ^basket.html$ index.php?module=shop&action=showbasket [QSA,L]
	RewriteRule ^basket-print.html$ index.php?module=shop&action=showbasket&print=1 [QSA,L]
	RewriteRule ^manufacturer-([0-9]+).html$ index.php?module=shop&manufacturer=$1 [QSA,L]
	RewriteRule ^manufacturer-([0-9]+).html&page=([0-9]+)$ index.php?module=shop&manufacturer=$1&page=$2 [QSA,L]
	RewriteRule ^manufacturer-print.html$ index.php?module=shop&manufacturer=$1&print=1 [QSA,L]
	RewriteRule ^checkout.html$ index.php?module=shop&action=checkout [QSA,L]
	RewriteRule ^checkout-print.html$ index.php?module=shop&action=checkout&print=1 [QSA,L]
	RewriteRule ^my-downloads.html$ index.php?module=shop&action=mydownloads [QSA,L]
	RewriteRule ^request.html$ index.php?module=shop&action=myorders&sub=request [QSA,L]
	RewriteRule ^my-orders.html$ index.php?module=shop&action=myorders [QSA,L]
	RewriteRule ^wishlist-refresh.html$ index.php?module=shop&action=wishlist&refresh=1 [QSA,L]
	RewriteRule ^wishlist.html$ index.php?module=shop&action=wishlist&pop=1 [QSA,L]
	RewriteRule ^datainf.html$ index.php?module=shop&action=infopage&page=datainf [QSA,L]
	RewriteRule ^shippinginf.html$ index.php?module=shop&action=infopage&page=shippinginf [QSA,L]
	RewriteRule ^shop-about.html$ index.php?module=shop&action=infopage&page=imprint [QSA,L]
	RewriteRule ^agb.html$ index.php?module=shop&action=infopage&page=agb [QSA,L]
	RewriteRule ^getfile-([0-9]+)-([\x21-\xFF]+).html$ index.php?module=shop&action=mydownloads&sub=getfile&Id=$1&FileId=$2&getId=$1 [QSA,L]

	## Yandex Market
	RewriteRule ^market.xml$ inc/yandex.php [QSA,L]
	RewriteRule ^sitemap.xml$ inc/sitemap.php [QSA,L]

	## Poll
	RewriteRule ^poll-([0-9]+).html$ index.php?module=poll&action=result&pid=$1
	RewriteRule ^pollcomment-([0-9]+).html$ index.php?module=poll&action=form&pop=1&pid=$1
	RewriteRule ^poll-archive.html$ index.php?module=poll&action=archive

	## RSS
	RewriteRule ^rss/rss-([0-9]+).xml$ inc/rss.php?id=$1 [QSA,L]

	RewriteRule ^index.php$ - [L]
	RewriteCond %{REQUEST_FILENAME} !-f
	RewriteCond %{REQUEST_FILENAME} !-d
	RewriteRule .* index.php [L]

</IfModule>
